(self.webpackChunkfunStackLabs_github_io=self.webpackChunkfunStackLabs_github_io||[]).push([[181],{7743:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>E});var a=n(7294),r=n(2048),o=n(986),c=n(30),i=n(6482),l=n(2530),u=n(2643),s=n(1647),m=n(4422),d=n(8508),f=n(4327);function h(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var a,r,o=[],c=!0,i=!1;try{for(n=n.call(e);!(c=(a=n.next()).done)&&(o.push(a.value),!t||o.length!==t);c=!0);}catch(e){i=!0,r=e}finally{try{c||null==n.return||n.return()}finally{if(i)throw r}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return g(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?g(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var p=320,v=document.createElement("canvas");v.width=p,v.height=p;var b=v.getContext("2d"),y=" !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~",C=function(e){return Array.from(new Set(e.split("")))};const E=function(){var e=h((0,a.useState)(0),2),t=e[0],n=e[1],g=h((0,a.useState)("/* Select font, size and characters. Then press generate. */"),2),v=g[0],E=g[1],x=h((0,a.useState)(null),2),Z=x[0],S=x[1],w=h((0,a.useState)(12),2),A=w[0],_=w[1],k=h((0,a.useState)(C(y)),2),T=k[0],P=k[1],F=(0,a.useCallback)((function(e){var t=e.target;if("undefined"!=typeof FileReader){var n=t.files[0],a=new FileReader;a.onload=function(){return S(m.ZP.parse(a.result))},a.readAsArrayBuffer(n)}})),z=(0,a.useCallback)((function(e){P(C(e.target.value))})),M=(0,a.useCallback)((function(){var e=(new Date).getTime();if(console.log((new Date).getTime()),null!=Z)if(A>200)E("/*Font size should be less than or equal to 200*/");else{E("");var t=Z.names.fontFamily.en+Z.names.fontSubfamily.en;t=(t=t.replace(/\W/g,"")+"_"+A).charAt(0).toLowerCase()+t.slice(1);var a=1/Z.unitsPerEm*A,r=Math.ceil(a*(Z.ascender-Z.descender)),o="",c=3,i=[],l={};T.forEach((function(e){var n=function(e,t,n,a){var r=e.getPath(t,0,n,n);r.draw(b);var o=r.getBoundingBox(),c=Math.round(o.y1),i=Math.round(o.x1),l=Math.round(o.x2-o.x1),u=Math.round(o.y2-o.y1);0===l&&(l=Math.round(e.charToGlyph(t).advanceWidth*a)),0===u&&(u=n);var s=function(e){for(var t=[],n=e[0],a=1,r=1;r<e.length;r++){var o=e[r];o===n&&a<15?a++:(t.push((a<<4)+n),a=1,n=o)}return t.push((a<<4)+n),t}(b.getImageData(i,c,l,u).data.filter((function(e,t){return t%4==3})).map((function(e){return Math.floor(e/16)}))),m={id:t,left:i,top:c,width:l,height:u,size:s.length,data:s};return b.clearRect(0,0,p,p),m}(Z,e,A,a);if(null!=n){i.push(n);var r="const uint8_t __".concat(t,"_").concat(n.id.charCodeAt(0),"[] = {").concat(n.data.join(","),"};");o="".concat(o," \n ").concat(r),l[n.id]=n,c+=n.size}}));for(var u="const TFTSTCustomFontCharData __".concat(t,"CharData[] = {"),s=32;s<127;s++){var m=l[String.fromCharCode(s)];null==m&&(m=l["?"]),null==m&&(m=i[0]),u+="{".concat(m.left,", ").concat(m.top,", ").concat(m.width,", ").concat(m.size,", __").concat(t,"_").concat(m.id.charCodeAt(0),"},"),c+=7}u+="};\n",E("".concat(o,"\n ").concat(u," const TFTSTCustomFontData tftstFont_").concat(t," = {").concat(r,", &__").concat(t,"CharData};")),n(c),console.log(e-(new Date).getTime())}else E("/*Please select a font file*/")}),[Z,A,T]),D=(0,a.useCallback)((function(e){var t=e.target.value,n=Number(t);!Number.isNaN(t)&&Number.isInteger(n)&&n>0&&_(n)})),I=(0,a.useMemo)((function(){return T.join("")}),[T]);return a.createElement(i.Z,{sx:{bgcolor:"#cccccc",minWidth:"320px"}},a.createElement(l.Z,null,a.createElement(s.Z,{gutterBottom:!0,variant:"h5",component:"div"},"Font Rasteriser"),a.createElement(s.Z,{variant:"body2",color:"text.secondary"},"This tool rasterises given font with the size and character set, producing portable C code that holds font data."),a.createElement(c.ZP,{container:!0,spacing:0,sx:{mt:4,mb:2}},a.createElement(d.Z,{sx:{mr:4}},"Select font file:"),a.createElement("input",{type:"file",accept:".ttf,.otf",id:"fontFileSelector",onChange:F})),a.createElement(c.ZP,{container:!0,spacing:0,sx:{mt:1}},a.createElement(c.ZP,{item:!0,xs:12},a.createElement(f.Z,{value:I,multiline:!0,label:"Characters",style:{width:"100%"},onChange:z}))),a.createElement(c.ZP,{container:!0,spacing:0,sx:{mt:2,mb:3}},a.createElement(c.ZP,{item:!0,xs:6},a.createElement(f.Z,{id:"fontSize",type:"number",label:"Font size",variant:"standard",value:A,onChange:D})),a.createElement(c.ZP,{item:!0,xs:6,textAlign:"right"},a.createElement(o.Z,{size:"medium"},a.createElement(r.Z,{onClick:function(){return P(C(y))}},"All ASCII"),a.createElement(r.Z,{onClick:function(){return P(C(y.replace(/[^0-9a-z]/gi,"")))}},"Alphanumeric"),a.createElement(r.Z,{onClick:function(){return P(C(y.replace(/[^0-9]/gi,"")))}},"Numeric")))),a.createElement(u.Z,{light:!0}),a.createElement(c.ZP,{container:!0,spacing:0,sx:{mt:3},textAlign:"right"},a.createElement(r.Z,{variant:"contained",sx:{mr:2},onClick:M},"Raster And Generate Code"),a.createElement(r.Z,{variant:"contained",onClick:function(){return navigator.clipboard.writeText(v)}},"Copy Code")),a.createElement(c.ZP,{container:!0,spacing:0,sx:{mt:1}},a.createElement(s.Z,{variant:"body2",color:"text.secondary"},"Memory required: ",t," bytes")),a.createElement(c.ZP,{container:!0,spacing:0,sx:{mt:1}},a.createElement(s.Z,{variant:"body2",color:"text.secondary",sx:{whiteSpace:"pre",width:"100%",border:1,borderColor:"text.secondary",borderRadius:2,p:2,overflow:"auto"}},v))))}},6102:()=>{}}]);